---
layout: post
name: ip
title: 机房网段更改后，如何避免在机房逐台更改IP?
date: 2009-05-16 14:18:00.000000000 +08:00
categories: []
permalink: /2009/05/ip.html
---
机房网段更改后，如何避免在机房逐台更改IP?<br><br><p><br><br>方法如下:</p><br /><ol><li>假定更改前网段为 10.0.1.*, 更改后为 10.0.2.*</li><li>先在机房内把 10.0.1.2 改为 10.0.2.2, 然后你就可以离开机房了</li><li>远程登录 10.0.2.2, 在 /etc/network/interfaces 上加入如下的一段<br><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; iface eth0:0 inet static<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address 10.0.1.2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; netmask 255.255.255.0<br></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注意，<b>不要</b>加入 gateway</li><li>运行 sudo ifup eth0:0, 运行 netstat -rn 检验是否成功:<br><span style="font-family: courier new,courier;">$ netstat -rn<br>Kernel IP routing table<br>Destination&nbsp;&nbsp;&nbsp;&nbsp; Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Flags&nbsp;&nbsp; MSS Window&nbsp; irtt Iface<br>10.0.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255.255.255.0&nbsp;&nbsp; U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 eth0<br>10.0.2.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255.255.255.0&nbsp;&nbsp; U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 eth0<br>0.0.0.0 &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.0.2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0 &nbsp; &nbsp; &nbsp; &nbsp; UG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 eth0</span></li><li><span style="font-family: arial,helvetica,sans-serif;">此时你已经可以登录 10.0.1.* 网段的机器</span></li><li><span style="font-family: arial,helvetica,sans-serif;">登录 10.0.1.3 更改IP, 重启</span></li><li><span style="font-family: arial,helvetica,sans-serif;">重复第6部，直到所有机器的IP更改完毕</span></li><li><span style="font-family: arial,helvetica,sans-serif;">在 10.0.2.2 上运行 sudo ifdown eth0:0, 从 </span>/etc/network/interfaces 中清除添加的配置段</li></ol><br><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/6324560-4814936921355306412?l=lidaobing.blogspot.com' alt='' /></div>
